> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [juejin.cn](https://juejin.cn/post/7094146488439144455)

å‰è¨€
--

é¢†å¯¼ä»Šå¤©åˆæ¥æ´»äº†ğŸ˜£ï¼Œè¦è®°å½•æ¯ä¸ªé¡µé¢çš„åœç•™æ—¶é—´ï¼Œä»¥åŠé¡µé¢çš„æ“ä½œï¼Œæ˜¯ç”±å“ªä¸ªé¡µé¢è·³è½¬è¿‡æ¥çš„ï¼Œç»™æ¯ä¸ªé¡µé¢ç”Ÿæˆ`GUID`ä¸ŠæŠ¥ç»™æœåŠ¡ç«¯ï¼Œå¹¶ä¸”éœ€è¦æºå¸¦è®¾å¤‡å‹å·å’Œè®¾å¤‡å”¯ä¸€æ ‡è¯†ğŸ™„

åç§°è§£é‡Š
----

#### UVï¼ˆUnique visitorï¼‰

æ˜¯æŒ‡é€šè¿‡äº’è”ç½‘è®¿é—®ã€æµè§ˆè¿™ä¸ªç½‘é¡µçš„è‡ªç„¶äººã€‚è®¿é—®æ‚¨ç½‘ç«™çš„ä¸€å°ç”µè„‘å®¢æˆ·ç«¯ä¸ºä¸€ä¸ªè®¿å®¢ã€‚`00:00-24:00`å†…ç›¸åŒçš„å®¢æˆ·ç«¯åªè¢«è®¡ç®—ä¸€æ¬¡ã€‚ä¸€å¤©å†…åŒä¸ªè®¿å®¢å¤šæ¬¡è®¿é—®ä»…è®¡ç®—ä¸€ä¸ª`UV`ã€‚

#### IPï¼ˆInternet Protocolï¼‰

ç‹¬ç«‹`IP`æ˜¯æŒ‡è®¿é—®è¿‡æŸç«™ç‚¹çš„`IP`æ€»æ•°ï¼Œä»¥ç”¨æˆ·çš„ IP åœ°å€ä½œä¸ºç»Ÿè®¡ä¾æ®ã€‚`00:00-24:00`å†…ç›¸åŒ`IP`åœ°å€ä¹‹è¢«è®¡ç®—ä¸€æ¬¡ã€‚

UV ä¸ IP åŒºåˆ«

> å¦‚ï¼šä½ å’Œä½ çš„å®¶äººç”¨å„è‡ªçš„è´¦å·åœ¨åŒä¸€å°ç”µè„‘ä¸Šç™»å½•æ–°æµªå¾®åšï¼Œåˆ™`IP`æ•° + 1ï¼Œ`UV`æ•° + 2ã€‚ç”±äºä½¿ç”¨çš„æ˜¯åŒä¸€å°ç”µè„‘ï¼Œæ‰€ä»¥`IP`ä¸å˜ï¼Œä½†ä½¿ç”¨çš„ä¸åŒè´¦å·ï¼Œæ‰€ä»¥`UV`+2

#### PVï¼ˆPage Viewï¼‰

å³é¡µé¢æµè§ˆé‡æˆ–ç‚¹å‡»é‡ï¼Œç”¨æˆ·æ¯ 1 æ¬¡å¯¹ç½‘ç«™ä¸­çš„æ¯ä¸ªç½‘é¡µè®¿é—®å‡è¢«è®°å½• 1 ä¸ª`PV`ã€‚ç”¨æˆ·å¯¹åŒä¸€é¡µé¢çš„å¤šæ¬¡è®¿é—®ï¼Œè®¿é—®é‡ç´¯è®¡ï¼Œç”¨ä»¥è¡¡é‡ç½‘ç«™ç”¨æˆ·è®¿é—®çš„ç½‘é¡µæ•°é‡ã€‚

#### VVï¼ˆVisit Viewï¼‰

ç”¨ä»¥ç»Ÿè®¡æ‰€æœ‰è®¿å®¢ 1 å¤©å†…è®¿é—®ç½‘ç«™çš„æ¬¡æ•°ã€‚å½“è®¿å®¢å®Œæˆæ‰€æœ‰æµè§ˆå¹¶æœ€ç»ˆå…³æ‰è¯¥ç½‘ç«™çš„æ‰€æœ‰é¡µé¢æ—¶ä¾¿å®Œæˆäº†ä¸€æ¬¡è®¿é—®ï¼ŒåŒä¸€è®¿å®¢ 1 å¤©å†…å¯èƒ½æœ‰å¤šæ¬¡è®¿é—®è¡Œä¸ºï¼Œè®¿é—®æ¬¡æ•°ç´¯è®¡ã€‚

PV ä¸ VV åŒºåˆ«

> å¦‚ï¼šä½ ä»Šå¤© 10 ç‚¹é’Ÿæ‰“å¼€äº†ç™¾åº¦ï¼Œè®¿é—®äº†å®ƒçš„ä¸‰ä¸ªé¡µé¢ï¼›11 ç‚¹é’Ÿåˆæ‰“å¼€äº†ç™¾åº¦ï¼Œè®¿é—®äº†å®ƒçš„ä¸¤ä¸ªé¡µé¢ï¼Œåˆ™ PV æ•° + 5ï¼ŒVV æ•° + 2.PV æ˜¯æŒ‡é¡µé¢çš„æµè§ˆæ¬¡æ•°ï¼ŒVV æ˜¯æŒ‡ä½ è®¿é—®ç½‘ç«™çš„æ¬¡æ•°ã€‚

åŸ‹ç‚¹åˆ†ç±»
----

### ä»£ç åŸ‹ç‚¹

é€šè¿‡ä»£ç çš„æ–¹å¼åœ¨é¡µé¢ä¸­åµŒå…¥é€»è¾‘ğŸ¨ï¼Œæ¯”å¦‚æ•è·ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œåœ¨è¿™ä¸ªç‚¹å‡»äº‹ä»¶ä¹‹å‰åŠ å…¥ä»£ç åŸ‹ç‚¹â›‘, ä¸ŠæŠ¥ç»™åå°ğŸ¥ã€‚å›½å†…å·²ç»æœ‰å¾ˆå¤šæˆå‹çš„æœåŠ¡å•†äº†å¦‚å‹ç›Ÿï¼Œç™¾åº¦ç»Ÿè®¡ç­‰ğŸŒ¯ï¼Œéƒ½æä¾›äº†æ¯”è¾ƒæˆå‹çš„æ–¹æ¡ˆğŸ¨ï¼Œå¹¶å¯ä»¥åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­æŸ¥çœ‹æ¯”è¾ƒè¯¦ç»†çš„æ•°æ®åˆ†æğŸ§µï¼Œä½†æ˜¯è‚¯å®šä¼šæœ‰é¢†å¯¼æƒ³è¦æŠŠè¿™äº›äº‹æƒ…æŒæ¡åœ¨è‡ªå·±çš„æ‰‹ä¸­ï¼Œæˆ‘ä»¬å°±åªèƒ½é€šè¿‡è‡ªèº«å¼€å‘æ¥å®ç°ä»£ç åŸ‹ç‚¹ğŸã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/071c7d15aebe422aa02bbbab3d62c0f1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   ä¼˜ç‚¹ï¼š

> *   æ§åˆ¶ç²¾å‡†ï¼Œå¯ä»¥éå¸¸ç²¾ç¡®åœ°é€‰æ‹©ä»€ä¹ˆæ—¶å€™å‘é€æ•°æ®ã€‚
> *   ä¼ é€’å¤šæ ·åŒ–è‡ªå®šä¹‰å±æ€§ã€è‡ªå®šä¹‰äº‹ä»¶ï¼Œä¼ é€’æ¯”è¾ƒä¸°å¯Œçš„æ•°æ®åˆ°æœåŠ¡ç«¯ã€‚

*   ç¼ºç‚¹ï¼š

> *   åŸ‹ç‚¹ä»£ä»·æ¯”è¾ƒå¤§ï¼Œæ¯ä¸€ä¸ªæ§ä»¶çš„åŸ‹ç‚¹éƒ½éœ€è¦æ·»åŠ ç›¸åº”çš„ä»£ç ï¼Œä¸ä»…å·¥ä½œé‡å¤§ï¼Œå¿…é¡»æ˜¯æŠ€æœ¯äººå‘˜æ‰èƒ½å®Œæˆã€‚
> *   æ›´æ–°çš„ä»£ä»·æ¯”è¾ƒå¤§ï¼Œæ¯ä¸€æ¬¡æ›´æ–°åŸ‹ç‚¹æ–¹æ¡ˆï¼Œéƒ½å¿…é¡»æ”¹ä»£ç ã€‚

### å¯è§†åŒ–åŸ‹ç‚¹

ä¸ªäººç†è§£çš„å¯è§†åŒ–åŸ‹ç‚¹åº”è¯¥æ˜¯è‚¯å®šéœ€è¦ç¬¬ä¸‰æ–¹çš„æœåŠ¡å•†æ”¯æŒğŸœï¼Œä¸ä¼šæœ‰åšä¸“é—¨ä¸šåŠ¡çš„å…¬å¸å»åšå¯è§†åŒ–åŸ‹ç‚¹çš„è§£å†³æ–¹æ¡ˆã€‚å¯è§†åŒ–åŸ‹ç‚¹å¼€å‘äººå‘˜é™¤é›†æˆé‡‡é›†å¯è§†åŒ–`SDK` å¤–ğŸ‘œï¼Œä¸éœ€è¦é¢å¤–å»å†™åŸ‹ç‚¹ä»£ç ğŸ ï¼Œè€Œæ˜¯ç”±ä¸šåŠ¡äººå‘˜æˆ–è¿è¥äººå‘˜é€šè¿‡è®¿é—®åˆ†æå¹³å°çš„åœˆé€‰åŠŸèƒ½ğŸ¤”ï¼Œæ¥ â€œåœˆâ€ å‡ºéœ€è¦å¯¹ç”¨æˆ·è¡Œä¸ºè¿›è¡Œæ•æ‰çš„æ§ä»¶ğŸªï¼Œå¹¶ç»™å‡ºäº‹ä»¶å‘½åğŸš˜ã€‚åœˆé€‰å®Œæ¯•åï¼Œè¿™äº›é…ç½®ä¼šåŒæ­¥åˆ°å„ä¸ªç”¨æˆ·çš„ç»ˆç«¯ä¸ŠğŸ˜®ï¼Œç”±é‡‡é›†`SDK`æŒ‰ç…§åœˆé€‰çš„é…ç½®è‡ªåŠ¨è¿›è¡Œç”¨æˆ·è¡Œä¸ºæ•°æ®çš„é‡‡é›†å’Œå‘é€ğŸš‡ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/556f975e2f224dad9e8012c70801a1a5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp) ä¼˜ç‚¹ï¼š

> *   åŸ‹ç‚¹ä»£ä»·å°ï¼Œæ›´æ–°ä»£ä»·å°
> *   åŸ‹ç‚¹åªéœ€ä¸šåŠ¡åŒå­¦æ¥å…¥ï¼Œå¼€å‘åªéœ€å¯¹æ¥å¯è§†åŒ–`SDK`

ç¼ºç‚¹ï¼š

> *   æ— æ³•åšåˆ°è‡ªå®šä¹‰è·å–æ•°æ®
> *   å¯è§†åŒ–åŸ‹ç‚¹è¦†ç›–çš„åŠŸèƒ½æœ‰é™
> *   ä»…æ”¯æŒå®¢æˆ·ç«¯è¡Œä¸º

### æ— ç—•åŸ‹ç‚¹

æ— ç—•åŸ‹ç‚¹åˆå«å…¨åŸ‹ç‚¹ğŸ¥ªï¼Œç½‘ä¸Šåˆå¾ˆå¤šæ–‡ç« å†™çš„éƒ½æ˜¯æ— ç—•åŸ‹ç‚¹æ˜¯å°†æ‰€æœ‰äº‹ä»¶çš„æ“ä½œå…¨éƒ¨ä¸ŠæŠ¥ğŸ˜€ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®ç°çš„è¿‡ç¨‹ä¸­è‚¯å®šæ˜¯ä¸ä¼šç›‘å¬é‚£ä¹ˆå¤šçš„äº‹ä»¶å§ğŸ˜‹ï¼Œä½†æ˜¯å¥½åƒä¹Ÿæœ‰ç¬¬ä¸‰æ–¹æœåŠ¡å•† sdk é›†æˆäº†æ‰€æœ‰äº‹ä»¶ğŸ˜ã€‚

> **æˆ‘çš„ä¸ªäººç†è§£**æ— ç—•åŸ‹ç‚¹æ˜¯é’ˆå¯¹æŸä¸€ä¸ªå•ä¸€äº‹ä»¶ï¼Œåœ¨å…¨å±€å®ç°ç›‘å¬è¾¾åˆ°ä¸ŠæŠ¥ï¼Œè€Œä¸æ˜¯å…¨éƒ¨äº‹ä»¶ä¸ŠæŠ¥æ‰å«æ— ç—•åŸ‹ç‚¹ğŸ¥™ã€‚åªè¦æœ‰æŸä¸ªäº‹ä»¶åœ¨å…¨å±€å®ç°ç›‘å¬ï¼Œé’ˆå¯¹è¿™ä¸ªäº‹ä»¶çš„åŸ‹ç‚¹æ–¹å¼å°±ç§°ä¸ºæ— ç—•åŸ‹ç‚¹ğŸŒ¯

ä¼˜ç‚¹ï¼š

> *   ç”±äºé‡‡é›†çš„æ˜¯å…¨é‡æ•°æ®ï¼Œæ‰€ä»¥äº§å“è¿­ä»£è¿‡ç¨‹ä¸­æ˜¯ä¸éœ€è¦å…³æ³¨åŸ‹ç‚¹é€»è¾‘çš„ï¼Œä¹Ÿä¸ä¼šå‡ºç°æ¼åŸ‹ã€è¯¯åŸ‹ç­‰ç°è±¡ã€‚
> *   æ— åŸ‹ç‚¹æ–¹å¼å› ä¸ºæ”¶é›†çš„æ˜¯å…¨é‡æ•°æ®ï¼Œå¯ä»¥å¤§å¤§å‡å°‘è¿è¥å’Œäº§å“çš„è¯•é”™æˆæœ¬
> *   å¦‚æœé›†æˆ sdk ä¹‹åæ— éœ€åŸ‹ç‚¹ï¼Œæ–¹ä¾¿å¿«æ·

ç¼ºç‚¹ï¼š

> *   ç¼ºç‚¹ä¸å¯è§†åŒ–åŸ‹ç‚¹ç›¸åŒï¼Œæœªè§£å†³ä¸ªæ€§åŒ–è‡ªå®šä¹‰è·å–æ•°æ®çš„é—®é¢˜ï¼Œç¼ºä¹æ•°æ®è·å–çš„çµæ´»æ€§ï¼›
> *   æ•°æ®é‡è¿‡å¤§ï¼Œå¦‚æœä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡å•†ï¼Œé’ˆå¯¹è‡ªèº«çš„æœåŠ¡å™¨æ˜¯ä¸ªè€ƒéªŒ

å®ç°æ–¹æ¡ˆæ­¥éª¤ï¼ˆuni-appï¼Œå…¶ä»–é¡¹ç›®é€»è¾‘ç›¸åŒï¼‰
------------------------

#### ä¸¤æ–¹é¢ä¸ŠæŠ¥: 1. äº‹ä»¶ä¸ŠæŠ¥ (ç›®å‰åªæœ‰ç‚¹å‡»äº‹ä»¶åŸ‹ç‚¹)ï¼Œ2. åœç•™æ—¶é—´ä¸ŠæŠ¥

*   **äº‹ä»¶ä¸ŠæŠ¥**ï¼šé€šè¿‡ç»™å…ƒç´ ç»‘å®šè‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼å®ç° (å‡å°‘å¯¹åŸæœ‰ä»£ç çš„ä¾µå…¥)ğŸœï¼Œå°†ä¿¡æ¯å­˜å‚¨åœ¨ç¼“å­˜æ± ä¸­å®šæ—¶ä¸ŠæŠ¥ï¼Œä¸ŠæŠ¥ä¹‹åæ¸…ç©ºä¹‹å‰çš„ä¸ŠæŠ¥ä¿¡æ¯ğŸ¥ ã€‚
*   **åœç•™æ—¶é—´ä¸ŠæŠ¥**ï¼šéœ€è¦é‡æ–°å°è£…è·¯ç”±ï¼Œåˆ›å»ºè·¯ç”±æ‹¦æˆªåœ¨è·³è½¬ä¹‹å‰è®°å½•æ¥æº, ä»¥åŠä¸Šä¸€ä¸ªé¡µé¢çš„åœç•™æ—¶é—´ï¼Œå½“æ‹¦æˆªå™¨æ•è·æˆåŠŸä¹‹åğŸŒ¯ï¼Œå¦‚æœå‘ç°åœç•™æ—¶é—´å¤§äº xx ç§’è¿›è¡Œä¸ŠæŠ¥ğŸ¥™ã€‚

_ä¼˜ç‚¹_ï¼šæ¸…æ™°åˆç†ï¼Œæ¯”è¾ƒé€‚åˆæ–°é¡¹ç›®ã€‚

_ç¼ºç‚¹_ï¼šé’ˆå¯¹è€é¡¹ç›®éœ€è¦ä¸äº§å“å’Œè¿è¥å¯¹æ¥åŸ‹ç‚¹æ–¹æ¡ˆç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ğŸ¤ªï¼Œå¦‚æœæ˜¯è€é¡¹ç›®éœ€è¦å¯¹`uni.navigateTo`,`uni.redirectTo`,`uni.reLaunch`,`uni.switchTab` è¿›è¡ŒäºŒæ¬¡å°è£…ã€‚

> é—®ï¼šä¸ºä»€ä¹ˆä½•å°†ä¿¡æ¯å­˜å‚¨ï¼Œè€Œä¸æ˜¯å®æ—¶ä¸ŠæŠ¥ï¼Ÿ  
> ç­”ï¼šè€ƒè™‘åˆ°æœåŠ¡å™¨çš„å‹åŠ›ï¼Œé‡‡ç”¨äº†å®šæ—¶ä¸ŠæŠ¥çš„æ–¹å¼ã€‚  
> é—®ï¼šä¸ºä»€ä¹ˆç›‘å¬åœç•™æ—¶é•¿å¤§äº XX ç§’æ‰è¿›è¡Œä¸ŠæŠ¥ï¼Ÿ  
> ç­”ï¼š1. æœåŠ¡å™¨çš„å‹åŠ›é—®é¢˜ã€‚2 è€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½åšä¸€äº›æ²¡æ„ä¹‰çš„æ“ä½œï¼Œæ‰€ä»¥åœç•™æ—¶é•¿å¤§äº XX ç§’æ‰å±äºæœ‰æ•ˆé¡µé¢ã€‚

å®ç°æ–¹æ³•
----

**äº‹ä»¶åŸ‹ç‚¹ä¸ŠæŠ¥**

*   åœ¨`common`æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤æ–‡ä»¶ï¼Œåœ¨`main.js`ä¸­å¼•ç”¨è¯¥æ–‡ä»¶ã€‚

```
import Vue from "vue";
// è‡ªå®šä¹‰åŸ‹ç‚¹æŒ‡ä»¤
Vue.directive("buried", {
  bind: (el, binding) => {
    if (binding.value) {
      //è¿™é‡Œå‚æ•°æ˜¯æ ¹æ®è‡ªå·±ä¸šåŠ¡å¯ä»¥è‡ªå·±å®šä¹‰
      let params = {
        currentUrl: binding.value.currentUrl,
        triggerType: binding.value.triggerType,
        title: binding.value.title,
        frontTriggerType: binding.value.triggerType,
        behavior: binding.value.behavior,
      };
      //å¦‚æœæ˜¯æµè§ˆç±»å‹ï¼Œç›´æ¥ä¿å­˜,ç›®å‰åªè€ƒè™‘ç‚¹å‡»ç±»å‹
      if (binding.value.triggerType == "browse") {
        console.log("browse", params);
        //è°ƒç”¨åå°æ¥å£ä¿å­˜æ•°æ®
      } else if (binding.value.triggerType == "click") {
        //å¦‚æœæ˜¯clickç±»å‹ï¼Œç›‘å¬clickäº‹ä»¶
        el.addEventListener(
          "click",
          () => {
            // å°†æ“ä½œå’Œå†…å®¹å­˜å‚¨åœ¨ç¼“å­˜ä¸­å®šæ—¶ä¸ŠæŠ¥
            let buriedArray = uni.getStorageSync('buriedArray') //è·å–åŸ‹ç‚¹é›†åˆ
            buriedArray.push(params)  // å°†åŸ‹ç‚¹é›†åˆå­˜å…¥ç¼“å­˜ä¸­
            uni.setStorageSync('buriedArray', buriedArray)
          },
          false
        );
      }
    }
  },
});
å¤åˆ¶ä»£ç 
```

åœ¨`app.vue`ä¸­çš„`onLaunch`ç”Ÿå‘½å‘¨æœŸä¸­åˆ›å»ºå®šæ—¶ä»»åŠ¡ä¸ç¼“å­˜æ± , åœ¨`onHide`ç”Ÿå‘½å‘¨æœŸä¸­é”€æ¯å®šæ—¶ä»»åŠ¡

```
let timeInterval = null
onLaunch(){
  uni.setStorageSync('buriedArray', [])
		// å®šæ—¶ä¸ŠæŠ¥åŸ‹ç‚¹æ•°æ®
		timeInterval = setInterval(() => {
			if (uni.getStorageSync('buriedArray').length > 0) {
				// ä¸ŠæŠ¥é€»è¾‘ï¼Œæ ¹æ®éœ€æ±‚è‡ªè¡Œå®Œå–„
				upLoadBuriedInfo(uni.getStorageSync('buriedArray'))
				// ä¸ŠæŠ¥æˆåŠŸä¹‹åæ¸…ç©ºåŸ‹ç‚¹æ•°æ®é‡æ–°ä¸ŠæŠ¥
				uni.setStorageSync('buriedArray', [])
			}
		}, time)
}
onHide: function () {
		timeInterval && clearInterval(timeInterval)
}
å¤åˆ¶ä»£ç 
```

**åœç•™æ—¶é—´ä¸ŠæŠ¥**

*   é¦–å…ˆè¯»å–`page.json`ä¸­çš„æ–‡ä»¶è·å–`path`å’Œ`title`([åŸæ–‡é“¾æ¥](https://link.juejin.cn?target=https%3A%2F%2Fwww.yezipi.net%2Farticle%2Fdetail%2F10086 "https://www.yezipi.net/article/detail/10086"))ï¼Œå…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª`router`æ–‡ä»¶å¤¹ğŸï¼Œåœ¨`vue.config.js`é‡Œé¢åŠ å…¥å¦‚ä¸‹ä»£ç , è¿™æ ·æ¯æ¬¡æ‰“åŒ…ä¹‹å`router`æ–‡ä»¶å¤¹ä¸‹çš„`index.js`ä¸­å°±ä¼šç”Ÿæˆä¸€ä¸ª `title`å’Œ`path`çš„å¯¹åº”è¡¨ã€‚ğŸ˜š

```
const path = require('path')
const fs = require('fs')

const fromFile = path.join(__filename, '../pages.json')
const toFile = path.join(__filename, '../router/index.js')
const buffPrefix = Buffer.from('export default ')

const fileData = fs.readFileSync(fromFile)

// è½¬æˆå¯è¯»çš„js, æ­£åˆ™åˆ é™¤æ³¨é‡Šï¼Œ ä¸ç„¶JSON.parseä¼šæŠ¥é”™
const fileObj = JSON.parse(fileData.toString().replace(/\/\/.*/g, ''))

// éå†ï¼Œåªå–è·¯å¾„å’Œæ ‡é¢˜ï¼Œå…¶ä»–çš„ä¸è¦ï¼Œå·²å‡å°æ–‡ä»¶ä½“ç§¯
const routes = fileObj.pages.map(e => {
	return {
		title: e.style ? e.style.navigationBarTitleText ? e.style.navigationBarTitleText : e.name : 'æœªçŸ¥',
		path: '/'+e.path,
	}
})
fs.writeFileSync(toFile, buffPrefix + Buffer.from(JSON.stringify(routes)))

module.exports = {
	configureWebpack: {
		plugins: []
	}
}
å¤åˆ¶ä»£ç 
```

*   åœ¨ common ä¸­åˆ›å»º routeGuards.js ç›‘å¬è·¯ç”±æ‹¦æˆªï¼Œè¿›è¡Œä¸ŠæŠ¥ï¼Œåœ¨ main.js ä¸­å¼•ç”¨è¯¥æ–‡ä»¶

```
import Vue from 'vue';
import v5 from 'uuid/v5';
import UniRouteGuard from '@/js_sdk/pocky-route-gurads/lib';
import router from '@/router'
Vue.use(UniRouteGuard);

const guard = new UniRouteGuard();

let startTime = Date.now();
guard.beforeEach((to, from, next) => {
	let currentTime = Date.now();
	if (from.url && from.url == '/pages/first/index') {
		next()
		return
	}
	console.log(router)
	if (to.url) {
		if (to.url.indexOf('?') > -1) {
			to.url = to.url.substr(0, to.url.indexOf('?'))
		}
	}
	let fromName = router.find(item => item.path == from.url) ? router.find(item => item.path == from.url).title : 'æœªçŸ¥'
	let toName = router.find(item => item.path == to.url) ? router.find(item => item.path == to.url).title : 'æœªçŸ¥'
  const stayTime=  parseInt((currentTime - startTime) / 1000)
	const MY_NAMESPACE = '1b671a64-40d5-491e-99b0-da01ff1f3341';

	console.log(`ç”±${fromName}è·³è½¬åˆ°${toName}å¹¶åœ¨${fromName}ä¸­åœç•™äº†${stayTime}ç§’é’Ÿ`);
	let params = {
		fromUrl: from.url, //æ¥æºåœ°å€
		toUrl: to.url, // ç›®çš„åœ°å€
		fromName: fromName, // æ¥æºåç§°
		toName: toName, // ç›®çš„åç§°
		stayTime: stayTime, // åœç•™æ—¶é•¿
		guid: v5(from.url, MY_NAMESPACE), //é¡µé¢uuid
		appUuid: uni.getStorageSync('appUuid') ? uni.getStorageSync('appUuid') : '', // appå”¯ä¸€æ ‡è¯†
		model: uni.getStorageSync("model")? uni.getStorageSync('model') : '', // æ‰‹æœºå‹å·
	}
	console.log(params)
  if(stayTime>10){
   // ä¸ŠæŠ¥é€»è¾‘
    console.log('åœç•™çš„æ—¶é—´å¤§äº10ç§’é’Ÿäº†ï¼Œå¯ä»¥è¿›è¡Œä¸ŠæŠ¥')
  }
  startTime = Date.now();
	next();
});
å¤åˆ¶ä»£ç 
```

> å› ä¸º`uni-app` æ²¡æœ‰æä¾›è‡ªèº«çš„è·¯ç”±æ‹¦æˆªæ’ä»¶ğŸ¥ ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å°è£…ğŸš˜ã€‚è¿™ç§æ–¹æ¡ˆé’ˆå¯¹æ–°é¡¹ç›®æ¯”è¾ƒåˆé€‚ï¼Œä½†æ˜¯é’ˆå¯¹è€é¡¹ç›®è·¯ç”±è·³è½¬çš„é€»è¾‘éƒ½å·²ç»é€šè¿‡åŸç”Ÿçš„æ–¹å¼å†™å®Œäº†ğŸ˜£ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œå°è£…çš„è¯ä¿®æ”¹çš„ç‚¹å¤ªå¤šäº†ğŸ¤”ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†è¿™ä¸ªæ’ä»¶ä¸ç”¨ä¿®æ”¹è·³è½¬`api`å¹¶ä¸”å¯ä»¥è·å–åˆ°ä¸Šä¸€ä¸ªé¡µé¢çš„è·¯ç”± ([å…¨å±€è·¯ç”±å®ˆå«](https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D1955 "https://ext.dcloud.net.cn/plugin?id=1955"))ï¼ŒåŸæ–‡ä»‹ç»çš„æ˜¯é€šè¿‡`npm`çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œæˆ‘é‡‡ç”¨çš„æ˜¯`hbuilderX`å¯¼å…¥çš„æ–¹å¼ï¼ˆæœ‰éœ€è¦çš„åŒå­¦å¯ä»¥è‡ªè¡ŒæŸ¥æ‰¾ï¼‰ğŸ¤™ã€‚

ä½¿ç”¨æ–¹æ³•
----

> *   äº‹ä»¶åŸ‹ç‚¹: å°†éœ€è¦åŸ‹ç‚¹çš„å…ƒç´ ç»‘å®šæ”¹æŒ‡ä»¤`v-buried`ç»‘å®šå‚æ•°

```
<!-- 
triggerType: äº‹ä»¶ç±»å‹
title: é¡µé¢æ ‡é¢˜
currentUrl: é¡µé¢è·¯ç”±
behavior: æ“ä½œè¡Œä¸º
-->
<view v-buried="{
triggerType:'click',
title:'æˆ‘çš„',
currentUrl: currentPath,
behavior:'ç‚¹å‡»æˆ‘çš„æ”¶è—æŒ‰é’®'}">
</view>
å¤åˆ¶ä»£ç 
```

> é¡µé¢è·³è½¬
> 
> *   **éœ€è¦åœ¨`page.json`ä¸­è¿›è¡Œä¿®æ”¹å¦‚æœä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰å¯¼èˆªæ¡æˆ–è€…æ²¡æœ‰ä½¿ç”¨å¯¼èˆªæ¡éœ€è¦è¿›è¡Œå‘½å**
> *   **éœ€è¦å°†é¡µé¢ä¸­è·³è½¬è·¯å¾„ä¿®æ”¹æˆç»å¯¹è·¯å¾„å¦åˆ™è·¯ç”±ä¼šåŒ¹é…ä¸åˆ°**

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eee650f8901e46b4bf2d91959d12dfd8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce20f15c81f04a8c829570903785c07c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

uni-app é›†æˆå‹ç›Ÿç»Ÿè®¡
--------------

*   é¦–å…ˆåœ¨[å‹ç›Ÿ](https://link.juejin.cn?target=https%3A%2F%2Fwww.umeng.com%2F "https://www.umeng.com/")ä¸Šåˆ›å»ºä¸€ä¸ªåº”ç”¨è·å–å…¶å¯¹åº”çš„ appkey

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a6c0312a506479aa2b5701cb02fd7f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   åœ¨ uni-app çš„ App æ¨¡å—é…ç½®ä¸­å‹¾é€‰å‹ç›Ÿç»Ÿè®¡å¹¶å¡«å†™å¯¹åº”çš„ keyï¼ˆæ¸ é“ id éšæ„å¡«å†™å°±å¯ä»¥ï¼‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8ba932112484748bbe51bc08d8d8d01~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   è¿™æ ·å®é™…ä¸Šå°±åœ¨ uni-app ä¸­é›†æˆäº†å‹ç›Ÿç»Ÿè®¡ï¼Œå¦‚æœæƒ³çœ‹åˆ°è¯¦ç»†çš„ä¸ŠæŠ¥æ•°æ®å¯ä»¥åœ¨å‹ç›Ÿåå°è¿›è¡ŒæŸ¥çœ‹ï¼ˆæ³¨ï¼š**å¿…é¡»æ‰“åŒ…ä¹‹åæˆ–è€…é‡‡ç”¨è‡ªå®šä¹‰åŸºåº§çš„æ–¹å¼æ‰èƒ½å¤Ÿè¿›è¡Œä¸ŠæŠ¥ï¼Œä¸ŠæŠ¥ç»“æœå¯èƒ½ç¬¬äºŒå¤©æ‰ä¼šç”Ÿæ•ˆï¼Œå…·ä½“ä¸ŠæŠ¥è§„åˆ™å¯ä»¥æŸ¥çœ‹å‹ç›Ÿå®˜ç½‘è§£é‡Š**ï¼‰ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c1596886f6664d259ba6f1a258ecdf11~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp) è¿™æ ·æœ€åŸºæœ¬çš„é›†æˆå°±å®Œæˆäº†ã€‚

> é‚£æˆ‘ä»¬å¦‚ä½•åŸ‹å…¥æˆ‘ä»¬çš„è‡ªå®šä¹‰äº‹ä»¶å‘¢ï¼Œæ¯”å¦‚æˆ‘å°†ä¸€ä¸ªç‡ƒæ°”ç½©åŠ å…¥äº†è´­ç‰©è½¦æŠŠä»–å½“æˆä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”èƒ½åœ¨å‹ç›Ÿåå°æŸ¥çœ‹åˆ°æˆ‘åŠ å…¥å•†å“çš„å±æ€§ä»¥åŠåŠ å…¥ç©ºæ°”ç‚¸é”…æˆ–è€…åŠ å…¥ç”µé¥¼é“›çš„ä¸€äº›æ•°é‡å¯¹æ¯”

*   1. åœ¨å‹ç›Ÿåå°æ³¨å†Œç›¸åº”çš„è‡ªå®šä¹‰äº‹ä»¶ ï¼ˆæˆ‘çš„åº”ç”¨ -> è®¾ç½® -> æ·»åŠ äº‹ä»¶ï¼‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89326fce60d740bf8fd499283e4c7174~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   2. åˆ›å»ºäº‹ä»¶å®Œæ¯•ä¹‹ååœ¨ä»£ç ä¸­è¿›è¡Œä¸ŠæŠ¥çš„ä»£ç çš„ç¼–å†™ï¼ˆæ­¥éª¤ä¸€å’Œæ­¥éª¤äºŒè°å…ˆè°åéƒ½å¯ä»¥ï¼‰

```
// https://www.html5plus.org/doc/zh_cn/statistic.html æ–‡æ¡£é“¾æ¥
// ç¬¬ä¸€ä¸ªå‚æ•°: åœ¨å‹ç›Ÿåå°æ³¨å†Œçš„äº‹ä»¶idï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šä¸šåŠ¡æ•°æ®
plus.statistic.eventTrig("purchase", {"type":"book","quantity":"3"});
å¤åˆ¶ä»£ç 
```

*   ä¸ŠæŠ¥å¯èƒ½ä¼šæœ‰å»¶è¿Ÿï¼Œå‘è¡Œè¿‡ä¸€æ®µæ—¶é—´ä¹‹åå°±å¯ä»¥åœ¨å‹ç›Ÿåå°æŸ¥çœ‹åˆ°ç›¸å…³æ•°æ®ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a33f98011694e14ac9b128a14a1ebdf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   ç‚¹å‡»æŸ¥çœ‹æŒ‰é’®å¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„æ•°æ®ï¼Œä»¥åŠä¸ŠæŠ¥çš„ä¸šåŠ¡æ•°æ®å¯¹æ¯”

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0c6efaab72a4e84830787f6c01cbff8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

uni-app è‡ªå¸¦ç»Ÿè®¡
------------

*   æ— éœ€é›†æˆå…¶ä»–ç›¸å…³ sdk åªéœ€åœ¨ manifest.json ä¸­å‹¾é€‰ uni ç»Ÿè®¡é…ç½®å³å¯æ³¨ï¼š**å¿…é¡»æ‰“åŒ…ä¹‹åæ‰èƒ½å¤Ÿè¿›è¡Œä¸ŠæŠ¥ï¼Œä¸ŠæŠ¥ç»“æœå¯èƒ½ç¬¬äºŒå¤©æ‰ä¼šç”Ÿæ•ˆï¼Œå…·ä½“ä¸ŠæŠ¥è§„åˆ™å¯ä»¥æŸ¥çœ‹ uni-app å®˜ç½‘è§£é‡Š**ï¼‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/128eb5aed151400caa8cb74c744e4dae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   [æŸ¥çœ‹ä¸ŠæŠ¥åå°](https://link.juejin.cn?target=https%3A%2F%2Ftongji.dcloud.net.cn%2F "https://tongji.dcloud.net.cn/")

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16aaaab3b182478c94daf0b8747f7f04~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

*   uni ç»Ÿè®¡ä¹Ÿæ”¯æŒ[è‡ªå®šä¹‰åŸ‹ç‚¹äº‹ä»¶](https://link.juejin.cn?target=https%3A%2F%2Fask.dcloud.net.cn%2Farticle%2F36304 "https://ask.dcloud.net.cn/article/36304")çš„ä¸ŠæŠ¥

```
// æ³¨æ„å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯titleç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²
uni.report("upload",{
					title: 'ä¸ŠæŠ¥æ•°æ®',
					content: 'ä¸ŠæŠ¥å†…å®¹'
				})
å¤åˆ¶ä»£ç 
```

*   å¯åœ¨äº‹ä»¶å’Œè½¬åŒ–æ¨¡å—ä¸­è¿›è¡ŒæŸ¥çœ‹

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8e44fa5d16c40bcac87b7fcce0101bb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

åœ¨æµ‹è¯• uni-app è‡ªå¸¦çš„ç»Ÿè®¡ä¸­ä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œå¦‚æœæœ‰æœ‹å‹èƒ½å¤Ÿè§£å†³çš„è¯ä¹Ÿå¯ä»¥å¸®åŠ©é¡¶é¡¶å¸–ï¼Œæˆ‘åœ¨è¿›è¡Œå®Œå–„[é—®é¢˜è´´](https://link.juejin.cn?target=https%3A%2F%2Fask.dcloud.net.cn%2Fquestion%2F143724 "https://ask.dcloud.net.cn/question/143724")ã€‚

æ€»ç»“
--

é’ˆå¯¹åŸ‹ç‚¹çš„æ–¹æ¡ˆï¼Œè‡ªå·±ä¹Ÿæ˜¯ä¸å¤ªç†Ÿæ‚‰ï¼Œæ²¡æœ‰å®æˆ˜ç»éªŒï¼Œæ‰¾äº†å¾ˆå¤šé€”å¾„ï¼Œæ–‡ä¸­å¯èƒ½ä¼šæœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œå¸Œæœ›å°ä¼™ä¼´ä»¬å¯ä»¥å¤šå¤šæŒ‡ç‚¹ã€‚ä¸€èµ·åŠ æ²¹ï¼ğŸ¤ª ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c81e2a9622b5431e82e1bf427e27f0d5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

å‚è€ƒé“¾æ¥
----

*   [è·å– Page.json](https://link.juejin.cn?target=https%3A%2F%2Fwww.yezipi.net%2Farticle%2Fdetail%2F10086 "https://www.yezipi.net/article/detail/10086")
    
*   [å¦‚ä½•æ¸…æ¥šæ˜“æ‡‚çš„è§£é‡Š â€œUV å’Œ PVï¼‚çš„å®šä¹‰ï¼Ÿ](https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F20448467 "https://www.zhihu.com/question/20448467")
    
*   [åŸ‹ç‚¹åŒºåˆ«](https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F37cbb7607ca4 "https://www.jianshu.com/p/37cbb7607ca4")